const t=window.App.h;class e{constructor(t,i){if(this.lib=!1,e.instance)throw new Error("Error - use SocketIoService.getInstance()");this.path=t,this.attachLibrary(i)}static getInstance(t="dist/collection/assets/lib/socket.io.js",i="localhost"){return e.instance=e.instance||new e(t,i),e.instance}attachLibrary(t){if(!this.lib){const e=document.createElement("script");e.src=this.path,document.querySelector("head").appendChild(e),this.ensureIoPresent().then(function(){this._io=window.io,this._socket=this._io("http://"+t+":3000"),this.lib=!0}.bind(this))}}ensureIoPresent(){const t=e=>{if(void 0!==window.io)return e();setTimeout(t,30,e)};return new Promise(function(e){t(e)}.bind(this))}ensureSocketPresent(){const t=e=>{if(void 0!==this._socket)return e();setTimeout(t,30,e)};return new Promise(function(e){t(e)}.bind(this))}onSocketReady(t){return this.ensureIoPresent().then(function(){t()}.bind(this))}onSocket(t,e){this.ensureSocketPresent().then(function(){this._socket.on(t,e)}.bind(this))}emitSocket(t,e){console.log(t,e),this.ensureSocketPresent().then(function(){this._socket.emit(t,e)}.bind(this))}socket(){return this._socket}}class i{constructor(){this._socketService=e.getInstance(this.service_url),this.list=[],this.attributeList=[],this.filter=""}componentWillLoad(){fetch("http://"+this.service_url+":3000/subscription?entity="+this.type+"&id="+this.entityid+"&queryFilter="+this.filter).then(t=>t.json()).then(t=>{this.list=JSON.parse(JSON.stringify(t)).entities,this.updateAttributeList()})}componentDidLoad(){this._socketService.onSocketReady(()=>{this._socketService.onSocket(this.type+"-"+this.entityid+"-"+this.filter,t=>{this.list=JSON.parse(JSON.stringify(t)).entities,this.updateAttributeList()})})}updateAttributeList(){if(""!=this.entityid&&"undefined"!=this.entityid||""!=this.type&&this.type){if(this.list.length>0){this.attributeList=[];for(var t=0;t<this.list[0].values.length;t++)this.attributeList.push(this.list[0].values[t].name)}}else fetch("http://"+this.service_url+":3000/attributeList?type="+this.entityid).then(t=>t.json()).then(t=>{this.attributeList=t})}writeRows(e,i){for(var s=0;s<e.length;s++)if(e[s].name==i)return t("td",null,e[s].value);return t("td",null,"None")}render(){return t("div",{class:"container body"},t("div",{class:"table-wrapper"},t("div",{class:"table-title"},t("div",{class:"row"},t("div",{class:"col-sm-6"},t("h2",null,t("b",null,this.type)," Devices")))),t("table",{class:"table table-striped table-hover"},t("thead",null,t("tr",null,t("th",null,t("span",{class:"custom-checkbox"},t("input",{type:"checkbox",id:"selectAll"}),t("label",{htmlFor:"selectAll"}))),t("th",null,"Name"),this.attributeList.length>0?this.attributeList.map(e=>t("th",null,e)):t("th",null,"No items found"))),t("tbody",null,this.list.map(e=>t("tr",null,t("td",null,t("span",{class:"custom-checkbox"},t("input",{type:"checkbox",id:"checkbox2",name:"options[]",value:"1"}),t("label",{htmlFor:"checkbox2"}))),t("td",null,e.name),this.attributeList.map(t=>this.writeRows(e.values,t)),""==this.entityid?t("td",{class:"button-td"},t("a",{href:this.page_url+"?type="+this.type+"&id="+e.name,class:" next round"},"â€º")):t("td",{class:"no-display"}))))),t("div",{class:"clearfix"},t("div",{class:"hint-text"},"Showing ",t("b",null,this.list.length)," out of ",t("b",null,this.list.length)," entries"),t("ul",{class:"pagination"},t("li",{class:"page-item disabled"},t("a",{href:"#"},"Previous")),t("li",{class:"page-item active"},t("a",{href:"#",class:"page-link"},"1")),t("li",{class:"page-item"},t("a",{href:"#",class:"page-link"},"Next"))))))}static get is(){return"app-table"}static get encapsulation(){return"shadow"}static get properties(){return{attributeList:{state:!0},entityid:{type:String,attr:"entityid"},filter:{type:String,attr:"filter"},list:{state:!0},page_url:{type:String,attr:"page_url"},service_url:{type:String,attr:"service_url"},type:{type:String,attr:"type"}}}static get style(){return".body.sc-app-table{color:#566787;background:#f5f5f5;font-family:Varela Round,sans-serif;font-size:13px}table.sc-app-table{width:100%;max-width:100%;margin-bottom:20px;border-spacing:0;border-collapse:collapse}.table-wrapper.sc-app-table{background:#fff;padding:20px 25px;margin:30px 0;border-radius:3px}.table-title.sc-app-table{background:#435d7d;color:#fff;padding:16px 30px;border-radius:6px}.table-title.sc-app-table   h2.sc-app-table{margin:5px 0 0;font-size:24px}.table-title.sc-app-table   .btn-group.sc-app-table{float:right}.table-title.sc-app-table   .btn.sc-app-table{color:#fff;float:right;font-size:13px;min-width:50px;border-radius:2px;border:none;outline:none!important;margin-left:10px}.table-title.sc-app-table   .btn.sc-app-table   i.sc-app-table{float:left;font-size:21px;margin-right:5px}.table-title.sc-app-table   .btn.sc-app-table   span.sc-app-table{float:left;margin-top:2px}.table.sc-app-table   tr.sc-app-table   td.sc-app-table, .table.sc-app-table   tr.sc-app-table   th.sc-app-table{border-color:#e9e9e9!important;padding:12px 15px!important;vertical-align:middle!important}.table.sc-app-table   tr.sc-app-table   th.sc-app-table:first-child, .table.sc-app-table   tr.sc-app-table   th.sc-app-table:last-child{width:3%}.table-striped.sc-app-table   tbody.sc-app-table   tr.sc-app-table:nth-of-type(odd){background-color:#fcfcfc}.table-striped.table-hover.sc-app-table   tbody.sc-app-table   tr.sc-app-table:hover{background:#f5f5f5}.table.sc-app-table   thead.sc-app-table   tr.sc-app-table   th.sc-app-table{vertical-align:bottom;border-bottom:2px solid #ddd}.table.sc-app-table   tr.sc-app-table   th.sc-app-table{border-color:#e9e9e9;padding:12px 15px;vertical-align:middle}.table.sc-app-table   th.sc-app-table   i.sc-app-table{font-size:13px;margin:0 5px;cursor:pointer}th.sc-app-table{text-align:left}.table.sc-app-table   tbody.sc-app-table   tr.sc-app-table   td.sc-app-table{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #ddd}.table.sc-app-table   td.sc-app-table:last-child   i.sc-app-table{opacity:.9;font-size:22px;margin:0 5px}.table.sc-app-table   td.sc-app-table   a.sc-app-table{font-weight:700;color:#566787;display:inline-block;text-decoration:none;outline:none!important}.table.sc-app-table   td.sc-app-table   a.sc-app-table:hover{color:#2196f3}.table.sc-app-table   td.sc-app-table   a.edit.sc-app-table{color:#ffc107}.table.sc-app-table   td.sc-app-table   a.delete.sc-app-table{color:#f44336}.table.sc-app-table   td.sc-app-table   i.sc-app-table{font-size:19px}.table.sc-app-table   .avatar.sc-app-table{border-radius:50%;vertical-align:middle;margin-right:10px}.pagination.sc-app-table{float:right;margin:0 0 5px}.pagination.sc-app-table   .active.sc-app-table   a.sc-app-table{z-index:3;color:#fff;cursor:default;background-color:#337ab7;border-color:#337ab7}.pagination.sc-app-table   li.sc-app-table{display:inline}.pagination.sc-app-table   li.sc-app-table   a.sc-app-table{border:none;font-size:13px;min-width:30px;min-height:30px;color:#999;margin:0 2px;line-height:30px;border-radius:2px!important;text-align:center;padding:0 6px;position:relative;float:left;text-decoration:none;background-color:#fff}.pagination.sc-app-table   li.sc-app-table   a.sc-app-table:hover{color:#666}.pagination.sc-app-table   li.active.sc-app-table   a.sc-app-table, .pagination.sc-app-table   li.active.sc-app-table   a.page-link.sc-app-table{background:#03a9f4}.pagination.sc-app-table   li.active.sc-app-table   a.sc-app-table:hover{background:#0397d6}.pagination.sc-app-table   li.disabled.sc-app-table   i.sc-app-table{color:#ccc}.pagination.sc-app-table   li.sc-app-table   i.sc-app-table{font-size:16px;padding-top:6px}.hint-text.sc-app-table{float:left;margin-top:10px;font-size:13px}.custom-checkbox.sc-app-table{position:relative}.custom-checkbox.sc-app-table   input[type=checkbox].sc-app-table{opacity:0;position:absolute;margin:5px 0 0 3px;z-index:9}.custom-checkbox.sc-app-table   label.sc-app-table:before{width:18px;height:18px;content:\"\";margin-right:10px;display:inline-block;vertical-align:text-top;background:#fff;border:1px solid #bbb;border-radius:2px;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:2}.custom-checkbox.sc-app-table   input[type=checkbox].sc-app-table:checked + label.sc-app-table:after{content:\"\";position:absolute;left:6px;top:3px;width:6px;height:11px;border:solid #000;border-width:0 3px 3px 0;-webkit-transform:inherit;transform:inherit;z-index:3;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.custom-checkbox.sc-app-table   input[type=checkbox].sc-app-table:checked + label.sc-app-table:before{border-color:#03a9f4;background:#03a9f4}.custom-checkbox.sc-app-table   input[type=checkbox].sc-app-table:checked + label.sc-app-table:after{border-color:#fff}.custom-checkbox.sc-app-table   input[type=checkbox].sc-app-table:disabled + label.sc-app-table:before{color:#b8b8b8;cursor:auto;-webkit-box-shadow:none;box-shadow:none;background:#ddd}.modal.sc-app-table   .modal-dialog.sc-app-table{max-width:400px}.modal.sc-app-table   .modal-body.sc-app-table, .modal.sc-app-table   .modal-footer.sc-app-table, .modal.sc-app-table   .modal-header.sc-app-table{padding:20px 30px}.modal.sc-app-table   .modal-content.sc-app-table{border-radius:3px}.modal.sc-app-table   .modal-footer.sc-app-table{background:#ecf0f1;border-radius:0 0 3px 3px}.modal.sc-app-table   .modal-title.sc-app-table{display:inline-block}.modal.sc-app-table   .form-control.sc-app-table{border-radius:2px;-webkit-box-shadow:none;box-shadow:none;border-color:#ddd}.modal.sc-app-table   textarea.form-control.sc-app-table{resize:vertical}.modal.sc-app-table   .btn.sc-app-table{border-radius:2px;min-width:100px}.modal.sc-app-table   form.sc-app-table   label.sc-app-table{font-weight:400}.sc-app-table:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.next.sc-app-table{background-color:#03a9f4;color:#fff!important}.round.sc-app-table{border-radius:50%}a.sc-app-table{text-decoration:none;display:inline-block;padding:8px 16px}a.sc-app-table:hover{background-color:#337ab7;color:#000}.button-td.sc-app-table{width:10px}.no-display.sc-app-table{display:none}"}}export{i as AppTable};